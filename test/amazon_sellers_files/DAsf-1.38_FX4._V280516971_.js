!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,module,exports){/**
 * @license
 * Copyright (c) 2014, Amazon.com
 * DACX SafeFrame v1.38_FX4 -- 2016-09-02T16:32:17
*/
!function(window,document){function initSafeframe(){function addAdHandler(a,b,c){ADS_HANDLERS[a]=ADS_HANDLERS[a]||{},ADS_HANDLERS[a][b]=c}function initializeAdIds(a,b){AD_IDS[a]={slotId:b,placementDivId:"ape_"+b+"_placement",iframeId:"ape_"+b+"_iframe"}}function sizeValidator(a,b){return a.height==b.height&&a.width==b.width}function openFeedback(a,b){if("function"==typeof window.DA.s)window.DAF=[a,b],window.DA.s(window.DA.f+"-external");else if("function"==typeof window.d16g_showFeedbackDialog){var c={a:b,c:a};window.d16g_showFeedbackDialog(c)}else{var d="Unable to open feedback popover (campaign:"+a+") aanParams: "+b;logError(d,null,null,ERROR_TYPE.ERROR)}}function getQueryParams(){var a={};try{for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("="),f=e[0];e.length>1&&0===f.indexOf("sf-")&&(a[f]=e[1])}}catch(g){logError("Error parsing query parameters",g,null,ERROR_TYPE.ERROR)}return a}function defaultResizeSafeFrameHandler(a){return function(){resizeSafeFrameAd(a.arid,a.size.width,a.size.height,a.maxAdWidth,!0,messenger,AD_IDS)}}function createSafeFrame(a){try{var b,c=JSON.stringify(a),d=document.getElementById(AD_IDS[a.arid].placementDivId);if(/MSIE (6|7|8)/.test(navigator.userAgent))try{b=document.createElement("<iframe name='"+c+"'>")}catch(e){b=createIframeWithName(c)}else b=createIframeWithName(c);b.id=AD_IDS[a.arid].iframeId,b.src=SF_HTML,b.scrolling="no",b.height=a.size.height||"250px",b.width=a.size.width||"300px",b.className=a.iframeClass||"",b.setAttribute("frameborder","0"),b.setAttribute("marginheight","0"),b.setAttribute("marginwidth","0"),b.setAttribute("scrolling","no"),b.setAttribute("allowtransparency","true"),b.setAttribute("allowfullscreen",""),b.setAttribute("mozallowfullscreen",""),b.setAttribute("webkitallowfullscreen",""),b.setAttribute(ARID_ATTR,a.arid),b.style.cssText=a.iframeExtraStyle||"",b.a=a.aanParams||{},b.f=a.feedbackJsUrl||1,b.c=a.campaignId,b.isSafeframeGoldbox="goldbox-ads"==a.slotName,b.boolFeedback=a.boolFeedback,a.showInlineFeedback&&(b.ifp=a.inlineFeedbackParams||{}),d.appendChild(b),sendCsmMetric("cf",a.slot),messenger.adMap[a.arid]={slot:d,iframe:b,options:a},adBlockerCSMMediator.adbMap[a.arid]={slot:a.slot,adBlockerIsDisabled:void 0,adImgLoaded:void 0,adImpressionsFired:void 0,adViewabilityFired:void 0}}catch(f){logError("Error creating safeFrame",f)}}function renderViewableAds(a,b){var c=!0;for(var d in VIEWABLE_ADS){var e=VIEWABLE_ADS[d].iframe?VIEWABLE_ADS[d].iframe.contentWindow:null;if(e&&!VIEWABLE_ADS[d].alreadyRendered){c=!1;var f=VIEWABLE_ADS[d].slot;viewability.findPercentInView(f)>=a?VIEWABLE_ADS[d].timeout||(VIEWABLE_ADS[d].timeout=setTimeout(renderAdMessage(d),b)):VIEWABLE_ADS[d].timeout&&(clearTimeout(VIEWABLE_ADS[d].timeout),VIEWABLE_ADS[d].timeout=null)}}c&&(util.removeWindowListener("scroll",debouncedViewabilityHandler),util.removeWindowListener("resize",debouncedViewabilityHandler))}function viewabilityHandler(){return renderViewableAds(viewability.PERCENT_VIEWABLE,viewability.DURATION_VIEWABLE)}function renderAdMessage(a){return function(){var b={key:"readyToRender",data:a};messenger.sendMessageToAd(a,"customMessage",b),VIEWABLE_ADS[a].timeout=null,VIEWABLE_ADS[a].alreadyRendered=!0}}function isDfpSimplifiedUrl(a){var b="pubads.g.doubleclick.net/gampad";return a.indexOf(b)>-1}function sendAjaxRequest(a,b,c,d){try{var e;window.XMLHttpRequest&&(e=new XMLHttpRequest),e&&"withCredentials"in e?(e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){var a=e.responseText;a?(d(a),sendCsmMetric("ld",b,"ajax:renderad")):(sendCsmMetric("ld",b,"ajax:noad"),collapseSlot(c))}else sendCsmMetric("ld",b,"ajax:errorstatus"),sendCsmMetric("ld",b,"ajax:error:"+e.status),collapseSlot(c)},e.open("GET",a,!0),e.withCredentials=!0,e.send(),sendCsmMetric("ld",b,"request")):(sendCsmMetric("ld",b,"ajax:xhr2notsupported"),collapseSlot(c))}catch(f){collapseSlot(c);var g=navigator.userAgent.toLowerCase(),h=g.match(/(firefox(?=\/))\/?\s*(\d+)/i)||[],i=3==h.length?parseInt(h[2],10):0;i>=42?sendCsmMetric("ld",b,"ajax:exception:ff"):(sendCsmMetric("ld",b,"ajax:exception"),logError("Error building AJAX request",f,null,ERROR_TYPE.ERROR))}}function createDfpAjaxRequest(a,b){sendAjaxRequest(a,b.slot,AD_IDS[b.arid].placementDivId,function(c){var d=a.match(/amzn.[a-z\.^\/].+?(?=&)/);b.dfpSiteZone=d?d[0].replace("/","."):"",b.htmlContent=c,createSafeFrame(b)})}function loadAdSequence(a){return function(){var b=AD_IDS[a.arid].placementDivId;if(b){var c=document.getElementById(b);if(c&&!c.innerHTML){var d=a.src;a.htmlContent||a.htmlContentEncoded||!d?createSafeFrame(a):isDfpSimplifiedUrl(d)?createDfpAjaxRequest(d,a):-1!==d.indexOf("xsp")?createXspAjaxRequest(d,a,b,createSafeFrame):createSafeFrame(a)}}}}function appendNewAdFeedbackLink(a,b){if(a&&!a.isFeedbackLoaded&&b.adFeedbackInfo.boolFeedback){a.isFeedbackLoaded=!0;var c=a.parentNode,d=(b.adFeedbackInfo.feedbackTextFont,b.adFeedbackInfo.slugText),e=b.adFeedbackInfo.endPoint,f=(b.adFeedbackInfo.adProgramId,b.adFeedbackInfo.emptyJson),g=b.advertisementStyle,h=b.feedbackDivStyle,i=function(a,b){if(a&&b)for(var c in b)a.style[c]=b[c];return a},j=function(a,b,c,d){var e=document.createElement(a);for(var f in b)e.setAttribute(f,b[f]);return i(e,c),d&&d.insertBefore(e,null),e},k=c.getElementsByTagName("div")[0]||j("div",{id:c.id+"_Feedback"},h,c),l=function(){var a=k.getElementsByTagName("div")[0]||j("div",0,g,k);a.innerHTML=d},m=function(a){return a.adProgramId},n=e&&e.length?e+m(b.adFeedbackInfo):f,o=function(a){if(4==a.readyState)if(200==a.status)try{var b=JSON.parse(a.responseText);if(b&&"ok"==b.status){if("html"in b&&b.html&&(k.innerHTML=b.html),"script"in b&&b.script){var c=k.getElementsByTagName("script")[0]||j("script",0,null,k);c.innerHTML=b.script}}else l()}catch(d){l()}else l()};util.sendAjaxRequest("GET",n,!0,o,l,l)}}function appendFeedbackLink(a){try{"function"==typeof d16g_addFeedbackLink&&!a.isFeedbackLoaded&&a.boolFeedback&&(a.isFeedbackLoaded=!0,d16g_addFeedbackLink(a))}catch(b){}}function modifyExistingIframes(){for(var a in messenger.adMap){var b=messenger.adMap[a].iframe;appendFeedbackLink(b)}}function loadAdFeedback(a){try{window.DA=window.DA||[];var b=null;if(a&&a.adFeedbackInfo&&(b=a.adFeedbackInfo.adProgramId),b){var c=messenger.adMap[a.arid].iframe;appendNewAdFeedbackLink(c,a)}else a.daJsUrl&&loadScript(a.daJsUrl,function(){appendFeedbackLink(messenger.adMap[a.arid].iframe)})}catch(d){logError("Problem loading ad feedback ",d)}}if(window.DAsf)return void window.DAsf.loadAds();window.DAsf={version:"1.38_FX4"};var SF_TYPE="text/x-dacx-safeframe",SF_DOMAIN=getMediaCentralOrigin(),SF_HTML=SF_DOMAIN+"/images/G/01/dacx/sf/sf-1.38_FX4._V280516968_.html",ARID_ATTR="data-arid",CUSTOM_METRICS={POST_MESSAGE_UNSUPPORTED:"d16g_postMessageUnsupported",POST_MESSAGE_SUPPORTED:"d16g_postMessageSupported"},ADS_HANDLERS={},VIEWABLE_ADS={},AD_IDS={};messenger.supportedCommands={resizeSafeFrameAd:function(a,b){util.addWindowListener("resize",ADS_HANDLERS[a.options.arid].defaultResizeSafeFrameHandler),resizeSafeFrameAd(a.options.arid,a.options.size.width,a.options.size.height,a.options.maxAdWidth,!0,messenger,AD_IDS)},changeSize:function(a,b){var c=a.options.allowedSizes;if(checkAgainstWhitelist(b,c,sizeValidator))a.iframe.height=b.height,a.iframe.width=b.width;else{var d="Size is not whitelisted: "+b.width+" x "+b.height+appendErrorDetails(a.options.arid);logError(d)}},collapseSlot:function(a,b){collapseSlot(AD_IDS[a.options.arid].placementDivId),"nav-sitewide-msg"===a.options.slotName&&delayLoad("amznJQ.available:navbarJSLoaded",function(){"undefined"!=typeof parent.navbar&&"function"==typeof parent.navbar.unHideSWM&&parent.navbar.unHideSWM()})},embedScript:function(a,b){var c=a.options.allowedDomains;if(checkAgainstWhitelist(b.src,c,scriptValidator))a.slot=document.getElementById(AD_IDS[a.options.arid].placementDivId),"undefined"!=typeof a.slot&&appendJsScript(b.src,a.slot,b.charset);else{var d="Domain is not whitelisted: "+b.src+appendErrorDetails(a.options.arid);logError(d)}},adFeedback:function(a,b){openFeedback(a.options.campaignId,a.options.aanParams)},logError:function(a,b){logError(b.message+appendErrorDetails(a.options.arid),b.error,a.options.slot,b.level)},sendMetrics:function(a,b){sendCsmMetric(b.metric,a.options.slot,b.metricMsg)},customMessage:function(a,b){messenger.customMessage(b.key,b.body)},adDetails:function(a,b){a.options.aanResponse=b.aanResponse,a.options.extraInfo=util.extend(a.options.extraInfo||{},b.extraInfo),loadAdFeedback(a.options)},notifyWhenViewable:function(a,b){VIEWABLE_ADS[a.options.arid]||(a.rendered=!1,VIEWABLE_ADS[a.options.arid]=a),debouncedViewabilityHandler(),util.addWindowListener("scroll",debouncedViewabilityHandler),util.addWindowListener("resize",debouncedViewabilityHandler)},enableViewabilityTracker:function(a,b){messenger.updateViewability(a.options.arid);var c=util.throttle(messenger.updateViewability,20);addAdHandler(a.options.arid,"viewabilityTracker",function(){c(a.options.arid)}),util.addWindowListener("scroll",ADS_HANDLERS[a.options.arid].viewabilityTracker),util.addWindowListener("resize",ADS_HANDLERS[a.options.arid].viewabilityTracker)},loadAdBlockerDetectorScript:function(a,b){var c=getMediaCentralOrigin()+"/images/G/01/ads/advertising/ads._TTH_.js?cachebust="+Math.ceil(99989999*Math.random()+1e4),d=function(){adBlockerCSMMediator.updateAdBlockerIsDisabled(a.options.arid,!1)},e=function(){adBlockerCSMMediator.updateAdBlockerIsDisabled(a.options.arid,!0)},f=util.createScript(c,"text/javascript","APE_adblockerdetector",d,e),g=document.getElementById(AD_IDS[a.options.arid].placementDivId);g?g.appendChild(f):document.body.appendChild(f)},updateAdImpressionsFired:function(a,b){adBlockerCSMMediator.updateAdImpressionsFired(a.options.arid,b.isImpFired)},updateAdViewabilityFired:function(a,b){adBlockerCSMMediator.updateAdViewabilityFired(a.options.arid,b.isViewed)},updateAdImgLoaded:function(a,b){adBlockerCSMMediator.updateAdImgLoaded(a.options.arid,b.isLoaded)},safeFrameReady:function(a){}},util.addWindowListener("message",messenger.receiveMessage);var debouncedViewabilityHandler=util.debounce(viewabilityHandler,100);window.DAsf.registerCustomMessageListener=messenger.registerCustomMessageListener,window.DAsf.sendCustomMessage=messenger.sendCustomMessage,window.DAsf.isSafeframeAd=function(a){var b=!1;return"string"==typeof a&&(b="undefined"!=typeof messenger.adMap[a]),b},window.DAsf.getAdDetails=function(a){if(!window.DAsf.isSafeframeAd(a))return!1;var b=messenger.adMap[a].options,c=b.aanResponse||{},d={creativeId:c.creativeId||"",adId:c.adId||"",adNetwork:b.adServer||"",hostName:b.hostDomain||"",extraInfo:b.extraInfo||{},iframe:messenger.adMap[a].iframe};return d},window.DAsf.openAdFeedback=function(a){try{var b=messenger.adMap[a];openFeedback(b.options.campaignId,b.options.aanParams)}catch(c){logError("Error opening feedback",c)}},window.DAsf.loadAds=function(){var indx=0,tag=null,tags=[];if("function"!=typeof document.getElementsByClassName){var divs=document.getElementsByTagName("div"),scripts=document.getElementsByTagName("script"),i=0;for(i=0;i<divs.length;i++)tags[i]=divs[i];for(i=0;i<scripts.length;i++)tags[i+divs.length]=scripts[i]}else tags=document.getElementsByClassName(SF_TYPE);for(0===tags.length&&(tags=document.getElementsByTagName("script"));tag=tags[indx++];)if(("DIV"==tag.tagName&&hasClass(tag,SF_TYPE)||tag.getAttribute("type")==SF_TYPE)&&!tag.getAttribute(ARID_ATTR)){var data=tag.getAttribute("data-ad-details")||tag.text||tag.innerHTML||tag.innerText;try{data=/^\s*\(function\(\)/.test(data)?eval(data):JSON.parse(data),data.arid=data.arid||Math.random().toString(16).slice(2),tag.setAttribute(ARID_ATTR,data.arid),data.hostDomain=location.protocol+"//"+location.host,data.aanParams=decodeURIComponent(data.aanParams),data.allowedSizes="object"==typeof data.allowedSizes&&data.allowedSizes.length>=0?data.allowedSizes.concat(data.size):[data.size];var whitelistedDomains="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");if(data.allowedDomains="object"==typeof data.allowedDomains&&data.allowedDomains.length>=0?data.allowedDomains.concat(whitelistedDomains):whitelistedDomains,data.productAdsUrl=window.paSearchTowerAdsURL||window.paCusRevAllURL,data.parentLocation=location.origin||location.protocol+location.hostname,data.queryParams=getQueryParams(),data.aPageStart=window.aPageStart,data.adStartTime=window[data.slotName]?window[data.slotName].adStartTime||0:0,addAdHandler(data.arid,"defaultResizeSafeFrameHandler",defaultResizeSafeFrameHandler(data)),initializeAdIds(data.arid,data.slot),sendCsmMetric("af",data.slot),"function"!=typeof window.postMessage){logCounter(CUSTOM_METRICS.POST_MESSAGE_UNSUPPORTED,1),collapseSlot(AD_IDS[data.arid].placementDivId);continue}logCounter(CUSTOM_METRICS.POST_MESSAGE_SUPPORTED,1),delayLoad(data.loadAfter,loadAdSequence(data))}catch(err){data=null,logError("Error parsing sf tag",err)}}},window.DAsf.loadAds()}var msgHandler=require("./components/msgHandler"),adBlockerHandler=require("./components/adBlockerHandler"),util=msgHandler.util,viewability=msgHandler.viewability,messenger=msgHandler.messenger,logError=msgHandler.logError,appendErrorDetails=messenger.appendErrorDetails,loadScript=msgHandler.loadScript,sendCsmMetric=msgHandler.sendCsmMetric,hasClass=msgHandler.hasClass,createIframeWithName=msgHandler.createIframeWithName,logCounter=msgHandler.logCounter,collapseSlot=msgHandler.collapseSlot,resizeSafeFrameAd=msgHandler.resizeSafeFrameAd,delayLoad=msgHandler.delayLoad,getMediaCentralOrigin=msgHandler.getMediaCentralOrigin,scriptValidator=msgHandler.scriptValidator,appendJsScript=msgHandler.appendJsScript,checkAgainstWhitelist=msgHandler.checkAgainstWhitelist,createXspAjaxRequest=msgHandler.createXspAjaxRequest,adBlockerCSMMediator=new adBlockerHandler.adBlockerCSMMediator(sendCsmMetric),ERROR_TYPE={ERROR:"ERROR",WARN:"WARN",FATAL:"FATAL"};"undefined"==typeof JSON?loadScript("https://images-na.ssl-images-amazon.com/images/G/01/da/js/json3.min._V308851628_.js",initSafeframe):initSafeframe()}(window,document)},{"./components/adBlockerHandler":2,"./components/msgHandler":3}],2:[function(a,b,c){function d(a,b){var c=this;this.adbMap=b||{};var d=function(b,d,e){var f=c.adbMap;f[b].adBlockerIsDisabled!==!0&&void 0!==f[b].adBlockerIsDisabled&&f[b].adBlockerIsDisabled===!1&&(d===!1?a("ld",f[b].slot,"adblocker:blocked:".concat(e)):d===!0&&a("ld",f[b].slot,"adblocker:notblocked:".concat(e)))};this.updateAdBlockerIsDisabled=function(b,e){var f=c.adbMap;f[b]&&(f[b].adBlockerIsDisabled=e,f[b].adBlockerIsDisabled?a("ld",f[b].slot,"adblockernotdetected"):a("ld",f[b].slot,"adblockerdetected"),d(b,f[b].adImgLoaded,"adimg"),d(b,f[b].adImpressionsFired,"adimpressions"),d(b,f[b].adViewabilityFired,"adviewability"))},this.updateAdImgLoaded=function(a,b){var e=c.adbMap;e[a]&&void 0===e[a].adImgLoaded&&(e[a].adImgLoaded=b,d(a,e[a].adImgLoaded,"adimg"))},this.updateAdImpressionsFired=function(a,b){var e=c.adbMap;e[a]&&void 0===e[a].adImpressionsFired&&(e[a].adImpressionsFired=b,d(a,e[a].adImpressionsFired,"adimpressions"))},this.updateAdViewabilityFired=function(a,b){var e=c.adbMap;e[a]&&void 0===e[a].adViewabilityFired&&(e[a].adViewabilityFired=b,d(a,e[a].adViewabilityFired,"adviewability"))}}b.exports.adBlockerCSMMediator=d},{}],3:[function(a,b,c){function d(a,b,c,d){b=b||new Error(a),d!=w.WARN&&(window.ueLogError?(window.ueLogError(b,{logLevel:d||w.ERROR,attribution:"APE-safeframe",message:a+" "}),c&&m("ld",c,a.replace(/\s+/g,"").toLowerCase())):"undefined"!=typeof console&&console.error&&console.error(a,b))}function f(){var a=window.location.host.match(/^.*\.([^.:\/]*)/),b=null;if(a&&a.length>1&&(b=a[1]),!/s/.test(location.protocol))return"cn"===b?"http://g-ec4.images-amazon.com":"http://z-ecx.images-amazon.com";var c="na";return/^(com|ca|mx|es)$/.test(b)?c="na":/^(uk|de|fr|it|in)$/.test(b)?c="eu":/^(jp)$/.test(b)?c="fe":/^(cn)$/.test(b)&&(c="cn"),"https://images-"+c+".ssl-images-amazon.com"}function g(a){return a.replace(/^.{1,5}:\/\/|^\/\//,"")}function h(a,b){var c=document.createElement("script");c.src=a,c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!=c.readyState&&"complete"!=c.readyState||(c.onload=c.onreadystatechange=null,b&&"function"==typeof b&&b())},c.onerror=function(a){return d("Error loading script",a,null,w.WARN),!1},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(c)}function i(a,b,c){var d=document.createElement("script");d.charset=c||"utf-8",d.src=a,b.appendChild(d)}function j(a,b){var c=/^((?:https?:)?\/\/)?([\w\-\.]+(?::[0-9]+)?)\/?(.*)$/,d=a.match(c)[2];return d==b}function k(a,b,c){if(!b||"object"!=typeof b)return!1;for(var d=0,e=b.length;e>d;d++)if(c(a,b[d]))return!0;return!1}function l(a,b,c){var e=this;this.adMap=a||{},this.supportedCommands=b||{},this.msgListeners=c||{};var f=function(a){var b=e.adMap,c=b[a].options;if(b!=={}&&c!=={}){var d="ape_"+c.slot+"_iframe";return b[a].iframe&&(b[a].iframe=b[a].iframe&&b[a].iframe.innerHTML?b[a].iframe:document.getElementById(d)),b[a].iframe}};this.sendMessageToAd=function(a,b,c){var d=f(a),e=d?d.contentWindow:null;if(e){var g={command:b,data:c};g=JSON.stringify(g),e.postMessage(g,"*")}},this.receiveMessage=function(a){var b=e.adMap,c=e.supportedCommands;if(b!=={}){var f,h;try{if(a.data&&a.data.message&&/.*Mash.*/i.test(a.data.message.id))return;if(f=JSON.parse(a.data),h=b[f.arid],!h||g(a.origin)!==g(x)||"object"!=typeof f.data)throw"Invalid Message: "+JSON.stringify(a.data)}catch(i){var j="Received Error: "+a.data;return"undefined"!=typeof f&&(j+=e.appendErrorDetails(f.arid)),void d(j,i,null,w.WARN)}h.options.debug&&"undefined"!=typeof console&&console.log(a);try{var k=c[f.command];k&&k(h,f.data)}catch(i){var j="Problem with message: "+a.data;"undefined"!=typeof f&&(j+=e.appendErrorDetails(f.arid)),d(j,i,null,w.WARN)}}},this.appendErrorDetails=function(a){var b=e.adMap;if(b!=={}){var c="";if("undefined"!=typeof b[a]){var d=b[a].options;"undefined"!=typeof d.aanResponse&&(c=" Ad Details: "+JSON.stringify(d.aanResponse))}return c}},this.customMessage=function(a,b){var c=e.msgListeners;if(c[a])try{c[a](b)}catch(f){d("Custom Message Error",f)}else d("Unrecognized custom message key: "+a,null,null,w.ERROR)},this.registerCustomMessageListener=function(a,b,c){var f=!1,g=e.msgListeners;try{if(!g[a]||"function"!=typeof g[a]||c)g[a]=b,f=!0;else{var h=new Error("Custom message listener already exists for key: "+a);d("Duplicate Key",h,null,w.WARN)}}catch(i){d("Error registering custom message listener",i)}return f},this.sendCustomMessage=function(a,b){var c=e.adMap,d={key:a,data:b};for(var f in c)e.sendMessageToAd(f,"customMessage",d)},this.updateViewability=function(a){var b=e.adMap,c=b[a].options;if(b!=={}&&c!=={}){var d,g,h;d=f(a),g=b[a].options.viewabilityStandards,h=u.getViewableInfo(d),"undefined"!=typeof h&&(h.viewabilityStandards=g,e.sendMessageToAd(a,"updateViewability",h))}}}function m(a,b,c){var d=y[a],e=c?c+":":"";"function"==typeof window[d]&&window[d](a,"adplacements:"+e+b.replace(/\_/g,":"),{wb:1})}function n(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)"),d=a.className;return d&&c.test(d)}function o(a){var b=document.createElement("iframe");return b.name=a,b}function p(a,b){var c=window.ue&&"function"==typeof ue.count;c&&ue.count(a,b)}function q(a){var b=document.getElementById(a);"undefined"!=typeof b&&(b.style.display="none")}function r(a,b,c,e,f,g,h){try{var i=document.getElementById(h[a].placementDivId),j=document.getElementById(h[a].wrapperDivId)||i,k=document.getElementById(h[a].iframeId);if(null===j||null===i||null===k)return;var l=c,m=b,n=function(a){l=a*c/b,m=a};if(f){var o=0===j.offsetWidth?window.innerWidth:j.offsetWidth;n(e?window.innerHeight<window.innerWidth?e:o:o)}l=Math.round(l)+"px",m=Math.round(m)+"px",k.style.height=l,k.style.width=m;var p={width:m,height:l};j!=i&&(i.style.height=l,g.sendMessageToAd(a,"resizeCreativeWrapper",p))}catch(q){d("Error resizing ad",q,h[a].slotId)}}function s(a,b,c,f){var g=function(a){if(4==a.readyState)if(200==a.status)try{var d=a.responseText;if(d){var e=JSON.parse(d);b.aaxImpPixelUrl=e.impPixelURL,b.aaxInstrPixelUrl=e.instrPixelURL,b.htmlContent=e.creative,b&&b.adFeedbackInfo&&(b.adFeedbackInfo.adProgramId=e.programId),f(b),m("ld",b.slot,"ajax:renderad")}else q(c),m("ld",b.slot,"ajax:noad")}catch(g){q(c)}else m("ld",b.slot,"ajax:errorstatus"),q(c)},h=function(){m("ld",b.slot,"ajax:xhrnotsupported"),q(c)},i=function(){m("ld",b.slot,"ajax:exception"),d("Error building AJAX request",e,null,w.ERROR),q(c)};v.sendAjaxRequest("GET",a,!0,g,h,i)}function t(a,b,c){var d="undefined"!=typeof P,e="undefined"!=typeof amznJQ,f=0!==c?function(){setTimeout(b,c)}:b;if("windowOnLoad"===a)"complete"===document.readyState?f():v.addWindowListener("load",f);else if("spATFEvent"===a)d?P.when("search-page-utilities").execute(function(a){a.afterEvent("spATFEvent",f)}):e?amznJQ.available("search-js-general",function(){SPUtils.afterEvent("spATFEvent",f)}):f();else if("criticalFeature"===a)d?P.when("cf").execute(f):e?amznJQ.onCompletion("amznJQ.criticalFeature",f):f();else if("r2OnLoad"===a)d?P.when("r2Loaded").execute(f):e?amznJQ.onReady("r2Loaded",f):f();else if(a.match("[^:]+:.+")){var g=a.split(":");if(g.length>1){var h=g[0].split("."),i=g[1],j=g.length>2?g[2]:i;d?P.when(j,"A").execute(f):e&&h.length>1?amznJQ[h[1]](i,f):f()}else f()}else f()}var u=a("./viewability"),v=a("./util"),w={ERROR:"ERROR",WARN:"WARN",FATAL:"FATAL"},x=f(),y={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"};b.exports.util=v,b.exports.viewability=u,b.exports.messenger=new l,b.exports.logError=d,b.exports.SF_DOMAIN=x,b.exports.loadScript=h,b.exports.sendCsmMetric=m,b.exports.hasClass=n,b.exports.createIframeWithName=o,b.exports.logCounter=p,b.exports.collapseSlot=q,b.exports.resizeSafeFrameAd=r,b.exports.createXspAjaxRequest=s,b.exports.delayLoad=t,b.exports.getMediaCentralOrigin=f,b.exports.appendJsScript=i,b.exports.scriptValidator=j,b.exports.checkAgainstWhitelist=k},{"./util":4,"./viewability":5}],4:[function(a,b,c){function d(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b}function e(a){var b,c,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k="",l=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<a.length;)f=j.indexOf(a.charAt(l++)),g=j.indexOf(a.charAt(l++)),h=j.indexOf(a.charAt(l++)),i=j.indexOf(a.charAt(l++)),b=f<<2|g>>4,c=(15&g)<<4|h>>2,e=(3&h)<<6|i,k+=String.fromCharCode(b),64!=h&&(k+=String.fromCharCode(c)),64!=i&&(k+=String.fromCharCode(e));return k=d(k)}/*
    @license
    Underscore.js 1.8.3
    http://underscorejs.org
    (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
    Underscore may be freely distributed under the MIT license.
*/
b.exports.debounce=function(a,b,c){var d,e,g,h,i,j=function(){var k=f()-h;b>k&&k>=0?d=setTimeout(j,b-k):(d=null,c||(i=a.apply(g,e),d||(g=e=null)))};return function(){g=this,e=arguments,h=f();var k=c&&!d;return d||(d=setTimeout(j,b)),k&&(i=a.apply(g,e),g=e=null),i}},b.exports.throttle=function(a,b,c){var d,e,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:f(),h=null,g=a.apply(d,e),h||(d=e=null)};return function(){var k=f();i||c.leading!==!1||(i=k);var l=b-(k-i);return d=this,e=arguments,0>=l||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(d,e),h||(d=e=null)):h||c.trailing===!1||(h=setTimeout(j,l)),g}};var f=function(){return Date.now?Date.now():(new Date).getTime()};b.exports.addListener=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):window.attachEvent&&a.attachEvent("on"+b,c)},b.exports.addWindowListener=function(a,c){b.exports.addListener(window,a,c)},b.exports.removeWindowListener=function(a,b){window.removeEventListener?window.removeEventListener(a,b,!1):window.detachEvent&&window.detachEvent("on"+a,b)},b.exports.getQueryString=function(a,b){var c=[];for(var d in a)c.push(d+"="+a[d]);var e=c.join("&");return b?encodeURIComponent(e):e},b.exports.extend=function(a){for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&null!==b[c]&&(a[c]=b[c])}return a},b.exports.decodeBase64=e,b.exports.sendAjaxRequest=function(a,b,c,d,e,f){try{var g=null;window.XMLHttpRequest?g=new XMLHttpRequest:window.ActiveXObject&&(g=new ActiveXObject("Microsoft.XMLHTTP")),g?(g.onreadystatechange=function(){d(g)},g.open(a,b,c),g.send()):"function"==typeof failFallback&&e()}catch(h){"function"==typeof errorHandler&&f()}},b.exports.createScript=function(a,b,c,d,e){if(!document.getElementById(c)){var f=document.createElement("script");return f.async=!0,f.setAttribute("crossorigin","anonymous"),f.src=a,f.type=b,f.id=c,f.onerror=d,f.onload=e,f}}},{}],5:[function(a,b,c){function d(a,b,c){var d=0;return d=a>0?c-a:b>0?Math.min(b,c):0,Math.min(d,b-a)}function e(){var a={};return a.t=window.screenTop?window.screenTop:window.screenY,a.l=window.screenLeft?window.screenLeft:window.screenX,a.w=b.exports.windowWidth(),a.h=b.exports.windowHeight(),a.b=a.t+a.h,a.r=a.l+a.w,a}function f(a){try{var c={},e=a.getBoundingClientRect();c.t=e.top,c.l=e.left,c.r=e.right,c.b=e.bottom,c.w=e.width||c.r-c.l,c.h=e.height||c.b-c.t,c.z=+window.getComputedStyle(a,null).zIndex;var f=b.exports.windowWidth(),g=b.exports.windowHeight(),h=d(e.top,e.bottom,g),i=d(e.left,e.right,f),j=h*i,k=c.h*Math.min(c.w,b.exports.windowWidth());return c.xiv=+Math.min(1,Math.max(0,i/c.w)).toFixed(2),c.yiv=+Math.min(1,Math.max(0,h/c.h)).toFixed(2),c.iv=+Math.min(1,Math.max(0,j/k)).toFixed(2),c}catch(l){return null}}function g(a){try{var c={},d=a.getBoundingClientRect();return c.t=d.top,c.l=d.left,c.r=b.exports.windowWidth()-d.right,c.b=b.exports.windowHeight()-d.bottom,c.xs=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>b.exports.windowWidth()?1:0,c.yx=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>b.exports.windowHeight()?1:0,c}catch(e){return null}}b.exports.PERCENT_VIEWABLE=.5,b.exports.DURATION_VIEWABLE=500,b.exports.findPercentInView=function(a){try{var c=a.getBoundingClientRect(),e=d(c.top,c.bottom,b.exports.windowHeight()),f=d(c.left,c.right,b.exports.windowWidth()),g=e*f,h=(c.bottom-c.top)*Math.min(c.right-c.left,b.exports.windowWidth());return Math.min(1,Math.max(0,g/h))}catch(i){return null}},b.exports.getViewableInfo=function(a){if(a){var b={},c=e(),d=f(a),h=g(a);return b.geom={},b.geom.win=c,b.geom.self=d,b.geom.exp=h,b.payload={},b.payload.wh=c.h,b.payload.ww=c.w,b.payload.sx=window.scrollX,b.payload.sy=window.scrollY,b.payload.ah=d.h,b.payload.aw=d.w,b.payload.top=d.t,b.payload.left=d.l,b}},b.exports.windowHeight=function(){return window.innerHeight||document.documentElement.clientHeight},b.exports.windowWidth=function(){return window.innerWidth||document.documentElement.clientWidth}},{}]},{},[1]);